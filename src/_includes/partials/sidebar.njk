{% from "macros/social-icon.njk" import socialIcon %}

<aside class="sidebar" aria-label="About and navigation">
  <section class="sidebar-section">
    <h2 class="sidebar-heading">About</h2>
    <div class="sidebar-about">
      <img class="sidebar-avatar" src="/img/avatar.png" alt="{{ metadata.author.name }}" width="80" height="80" eleventy:widths="80,160" eleventy:output="/img/">
      <p>{{ metadata.author.bio }}</p>
    </div>
  </section>

  {% set allTags = collections.all | getAllTags | filterTagList | sort %}
  {% if allTags.length %}
  <section class="sidebar-section">
    <h2 class="sidebar-heading">Topics</h2>
    <ul class="sidebar-tags" role="list">
    {% for tag in allTags %}
      {% set tagUrl %}/tags/{{ tag | slugify }}/{% endset %}
      <li><a href="{{ tagUrl }}">{{ tag }}</a> <span class="sidebar-tag-count">({{ collections[tag].length }})</span></li>
    {% endfor %}
    </ul>
  </section>
  {% endif %}

  <section class="sidebar-section">
    <h2 class="sidebar-heading">Find me</h2>
    <ul class="sidebar-social" role="list">
    {% for service, profileURL in metadata.author.alternates %}
      {% if service != "blog" %}
      <li>
        <a href="{{ profileURL }}" rel="me external">
          {{ socialIcon(service, 20) }}
          <span>{{ service }}</span>
        </a>
      </li>
      {% endif %}
    {% endfor %}
      <li>
        <a href="mailto:{{ metadata.author.email }}" rel="me">
          {{ socialIcon("email", 20) }}
          <span>email</span>
        </a>
      </li>
    </ul>
  </section>
</aside>
