{% from "macros/social-icon.njk" import socialIcon %}

<aside class="sidebar" aria-label="About and navigation">
  <hr class="sidebar-top-divider">

  <section class="sidebar-section sidebar-quote-section" aria-label="Quote">
    <p class="sidebar-quote">"You have to treat the chickens pretty well, 'cause they've got a very tough union."</p>
    <p class="sidebar-quote-attribution">&mdash; <a href="https://muppet.fandom.com/wiki/Episode_207:_Edgar_Bergen/transcript#:~:text=You%20have%20to%20treat%20the%20chickens%20pretty%20well%2C%20'cause%20they've%20got%20a%20very%20tough%20union." rel="external">Kermit the Frog</a></p>
  </section>

  <section class="sidebar-section">
    <h2 class="sidebar-heading">About</h2>
    <div class="sidebar-about">
      <div class="sidebar-identity">
        <img class="sidebar-avatar" src="/img/avatar.png" alt="{{ metadata.author.name }}" width="80" height="80" eleventy:widths="80,160" eleventy:output="/img/">
        <a class="sidebar-handle" href="https://dwk.io" rel="me">dwk</a>
      </div>
      <p>{{ metadata.author.bio }}</p>
    </div>
  </section>

  {% set allTags = collections.all | getAllTags | filterTagList | sort %}
  {% if allTags.length %}
  <section class="sidebar-section">
    <h2 class="sidebar-heading">Topics</h2>
    <ul class="sidebar-tags" role="list">
    {% for tag in allTags %}
      {% set tagUrl %}/tags/{{ tag | slugify }}/{% endset %}
      <li><a href="{{ tagUrl }}">{{ tag }}</a> <span class="sidebar-tag-count">({{ collections[tag].length }})</span></li>
    {% endfor %}
    </ul>
  </section>
  {% endif %}

  <section class="sidebar-section">
    <h2 class="sidebar-heading">Find me</h2>
    <ul class="sidebar-social" role="list">
    {% for service, profileURL in metadata.author.alternates %}
      {% if service != "blog" %}
      <li>
        <a href="{{ profileURL }}" rel="me external">
          {{ socialIcon(service, 20) }}
          <span>{{ service }}</span>
        </a>
      </li>
      {% endif %}
    {% endfor %}
      <li>
        <a href="mailto:{{ metadata.author.email }}" rel="me">
          {{ socialIcon("email", 20) }}
          <span>email</span>
        </a>
      </li>
    </ul>
  </section>
</aside>
