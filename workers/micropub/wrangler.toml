name = "pulletsforever-micropub"
main = "src/index.js"
compatibility_date = "2026-02-18"
compatibility_flags = ["nodejs_compat"]
upload_source_maps = true

[vars]
SITE_URL = "https://pulletsforever.com"
GITLAB_PROJECT_ID = "dwk-io/pulletsforever.com"
GITLAB_BRANCH = "main"
BLOG_PATH = "src/posts"
MEDIA_URL = "https://media.pulletsforever.com"
MAX_FILE_SIZE = 10485760  # 10 MB in bytes

# R2 bucket for media uploads
[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "pulletsforever-media"

# Secrets (set via `wrangler secret put`):
# - GITLAB_TOKEN: GitLab personal access token with api scope

[observability]
enabled = true
head_sampling_rate = 1

[observability.logs]
enabled = true
head_sampling_rate = 1
invocation_logs = true
